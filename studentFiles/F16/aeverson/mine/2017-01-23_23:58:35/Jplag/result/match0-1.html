<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>cclient.c</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>cclient.c</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>char global_a[1024]; /* char BUFFER [ 1024 ] ; */

<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#0',2,'match0-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>unsigned int __bswap_32(unsigned int a) /*  */{
return __builtin_bswap32(a); /* return __builtin_bswap32(__bsx) */
}
__uint64_t __bswap_64(__uint64_t a) /*  */{
return __builtin_bswap64(a); /* return __builtin_bswap64(__bsx) */
<A NAME="3"></A>}
void sendInitPacket(cclient *a, int b) /* void sendInitPacket ( cclient * clientInfo , int socket_num ) { */{</B></FONT>
initPacket c; /* initPacket sendInfo ; */
<FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#3',2,'match0-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>unsigned char *d = malloc(4 + a-&gt;len); /* unsigned char * data = malloc ( 4 + clientInfo -&gt; len ) ; */
c.handle = a; /* sendInfo . handle = clientInfo ; */
c.head.flag = 1; /* sendInfo . head . flag = 1 ; */
c.head.packetLen = htons(4 + a-&gt;len); /* sendInfo . head . packetLen = htons ( 4 + clientInfo -&gt; len ) ; */
memcpy(d, &amp;c.head, 3); /* memcpy ( data , &amp; sendInfo . head , 3 ) ; */
memcpy(&amp;d[3], &amp;a-&gt;len, 1); /* memcpy ( &amp; data [ 3 ] , &amp; clientInfo -&gt; len , 1 ) ; */
memcpy(&amp;d[4], a-&gt;name, a-&gt;len); /* memcpy ( &amp; data [ 4 ] , clientInfo -&gt; name , clientInfo -&gt; len ) ; */
if (send(b, d, 4 + a-&gt;len, 0)&lt;0) /* if (send(socket_num, data, 4 + clientInfo-&gt;len, 0)&lt;0) */ {
perror(&quot;Send on Client&quot;); /* perror ( &quot;Send on Client&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
}
free(d); /* free ( data ) ; */
}
void sendMessage(cclient *a, cclient *b, msgData *c, int d) /* void sendMessage ( cclient * src , cclient * dest , msgData * msg , int socket ) { */{</B></FONT>
messagePacket *e = malloc(sizeof(messagePacket)); /* messagePacket * msgPck = malloc ( sizeof ( messagePacket ) ) ; */
int f = 3; /* int index = 3 ; */
int g = 5 + a-&gt;len + b-&gt;len + c-&gt;size; /* int size = 5 + src -&gt; len + dest -&gt; len + msg -&gt; size ; */
unsigned char *h = malloc(g); /* unsigned char * data = malloc ( size ) ; */
e-&gt;head.packetLen = htons(g); /* msgPck -&gt; head . packetLen = htons ( size ) ; */
e-&gt;head.flag = 5; /* msgPck -&gt; head . flag = 5 ; */
e-&gt;dest = b; /* msgPck -&gt; dest = dest ; */
e-&gt;src = a; /* msgPck -&gt; src = src ; */
e-&gt;text = c; /* msgPck -&gt; text = msg ; */
memcpy(h, &amp;e-&gt;head, 3); /* memcpy ( data , &amp; msgPck -&gt; head , 3 ) ; */
memcpy(&amp;h[3], &amp;e-&gt;dest-&gt;len, 1); /* memcpy ( &amp; data [ 3 ] , &amp; msgPck -&gt; dest -&gt; len , 1 ) ; */
f += 1; /* index += 1 ; */
<A NAME="1"></A>memcpy(&amp;h[f], e-&gt;dest-&gt;name, e-&gt;dest-&gt;len); /* memcpy ( &amp; data [ index ] , msgPck -&gt; dest -&gt; name , msgPck -&gt; dest -&gt; len ) ; */
f += e-&gt;dest-&gt;len; /* index += msgPck -&gt; dest -&gt; len ; */
memcpy(&amp;h[f], &amp;e-&gt;src-&gt;len, 1); /* memcpy ( &amp; data [ index ] , &amp; msgPck -&gt; src -&gt; len , 1 ) ; */
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#1',2,'match0-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>f += 1; /* index += 1 ; */
memcpy(&amp;h[f], e-&gt;src-&gt;name, e-&gt;src-&gt;len); /* memcpy ( &amp; data [ index ] , msgPck -&gt; src -&gt; name , msgPck -&gt; src -&gt; len ) ; */
f += e-&gt;src-&gt;len; /* index += msgPck -&gt; src -&gt; len ; */
memcpy(&amp;h[f], e-&gt;text-&gt;msg, e-&gt;text-&gt;size); /* memcpy ( &amp; data [ index ] , msgPck -&gt; text -&gt; msg , msgPck -&gt; text -&gt; size ) ; */
if (send(d, (void *)h, g, 0)&lt;0) /* if (send(socket, (void *)data, size, 0)&lt;0) */ {
perror(&quot;Send Message&quot;); /* perror ( &quot;Send Message&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
}
free(e); /* free ( msgPck ) ; */
free(h); /* free ( data ) ; */
}
void sendMsgToAll(cclient *a, msgData *b, int c) /* void sendMsgToAll ( cclient * myInfo , msgData * textMsg , int socketNum ) { */{
<A NAME="2"></A>chatHead d; /* chatHead head ; */
int e = 4 + a-&gt;len + b-&gt;size; /* int length = 4 + myInfo -&gt; len + textMsg -&gt; size ; */
char *f = malloc(e); /* char * data = malloc ( length ) ; */</B></FONT>
<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#2',2,'match0-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>d.flag = 4; /* head . flag = 4 ; */
d.packetLen = htons(e); /* head . packetLen = htons ( length ) ; */
memcpy(f, &amp;d, 3); /* memcpy ( data , &amp; head , 3 ) ; */
memcpy(&amp;f[3], &amp;a-&gt;len, 1); /* memcpy ( &amp; data [ 3 ] , &amp; myInfo -&gt; len , 1 ) ; */
memcpy(&amp;f[4], a-&gt;name, a-&gt;len); /* memcpy ( &amp; data [ 4 ] , myInfo -&gt; name , myInfo -&gt; len ) ; */
memcpy(&amp;f[4 + a-&gt;len], b-&gt;msg, strlen(b-&gt;msg)); /* memcpy ( &amp; data [ 4 + myInfo -&gt; len ] , textMsg -&gt; msg , strlen ( textMsg -&gt; msg ) ) ; */
if (send(c, (void *)f, e, 0)&lt;0) /* if (send(socketNum, (void *)data, length, 0)&lt;0) */ {
perror(&quot;Send broadcast&quot;); /* perror ( &quot;Send broadcast&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
}
free(f); /* free ( data ) ; */
}
void sendListRequest(cclient *a, int b) /* void sendListRequest ( cclient * myInfo , int socket ) { */{
listReq *c = malloc(sizeof(listReq)); /* listReq * data = malloc ( sizeof ( listReq ) ) ; */</B></FONT>
c-&gt;packetLen = htons(3); /* data -&gt; packetLen = htons ( 3 ) ; */
c-&gt;flag = 10; /* data -&gt; flag = 10 ; */
if (send(b, (void *)c, 3, 0)&lt;0) /* if (send(socket, (void *)data, 3, 0)&lt;0) */ {
perror(&quot;Send List Req&quot;); /* perror ( &quot;Send List Req&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
}
free(c); /* free ( data ) ; */
}
void sendExitRequest(cclient *a, int b) /* void sendExitRequest ( cclient * myInfo , int socket ) { */{
exitReq *c = malloc(sizeof(exitReq)); /* exitReq * data = malloc ( sizeof ( exitReq ) ) ; */
c-&gt;packetLen = htons(3); /* data -&gt; packetLen = htons ( 3 ) ; */
c-&gt;flag = 8; /* data -&gt; flag = 8 ; */
if (send(b, (void *)c, 3, 0)&lt;0) /* if (send(socket, (void *)data, 3, 0)&lt;0) */ {
perror(&quot;Send Exit Req&quot;); /* perror ( &quot;Send Exit Req&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
}
free(c); /* free ( data ) ; */
}
int getHandle(cclient *a, char *b) /* int getHandle ( cclient * handleInfo , char * buff ) { */{
a-&gt;len = strcspn(b, &quot; \n&quot;); /* handleInfo -&gt; len = strcspn ( buff , &quot; \n&quot; ) ; */
if (a-&gt;len == 0) /* if (handleInfo-&gt;len == 0) */ {
return -1; /* return -1 */
}
a-&gt;name = malloc(a-&gt;len); /* handleInfo -&gt; name = malloc ( handleInfo -&gt; len ) ; */
memcpy(a-&gt;name, b, a-&gt;len); /* memcpy ( handleInfo -&gt; name , buff , handleInfo -&gt; len ) ; */
return 0; /* return 0 */
}
void getText(msgData *a, char *b) /* void getText ( msgData * textMsg , char * buff ) { */{
a-&gt;size = strcspn(b, &quot;\n&quot;); /* textMsg -&gt; size = strcspn ( buff , &quot;\n&quot; ) ; */
if (a-&gt;size&gt;1000) /* if (textMsg-&gt;size&gt;1000) */ {
a-&gt;msg = malloc(1000); /* textMsg -&gt; msg = malloc ( 1000 ) ; */
memcpy(a-&gt;msg, b, 1000 - 1); /* memcpy ( textMsg -&gt; msg , buff , 1000 - 1 ) ; */
a-&gt;msg[1000] = '\0'; /* textMsg -&gt; msg [ 1000 ] = '\0' ; */
a-&gt;remaining = malloc(a-&gt;size - (1000 - 1 )); /* textMsg -&gt; remaining = malloc ( textMsg -&gt; size - ( 1000 - 1 ) ) ; */
memcpy(a-&gt;remaining, &amp;b[1000], a-&gt;size - (1000 - 1 )); /* memcpy ( textMsg -&gt; remaining , &amp; buff [ 1000 ] , textMsg -&gt; size - ( 1000 - 1 ) ) ; */
} else {
a-&gt;msg = malloc(a-&gt;size + 1); /* textMsg -&gt; msg = malloc ( textMsg -&gt; size + 1 ) ; */
memcpy(a-&gt;msg, b, a-&gt;size); /* memcpy ( textMsg -&gt; msg , buff , textMsg -&gt; size ) ; */
a-&gt;msg[a-&gt;size] = '\0'; /* textMsg -&gt; msg [ textMsg -&gt; size ] = '\0' ; */
}
}
void processCommands(cclient *a, int b) /* void processCommands ( cclient * myInfo , int socketNum ) { */{
char *c; /* char * data ; */
cclient d; /* cclient destInfo ; */
uint32_t e; /* uint32_t cmdSize ; */
char f, g[1024]; /* char option , buff [ 1024 ] ; */
msgData h; /* msgData textMsg ; */
fgets(g, 1024, stdin); /* fgets ( buff , 1024 , stdin ) ; */
e = strcspn(g, &quot; \n&quot;) + 1; /* cmdSize = strcspn ( buff , &quot; \n&quot; ) + 1 ; */
c = &amp;g[e]; /* data = &amp; buff [ cmdSize ] ; */
if (e == 3&amp;&amp;g[0] == '%') /* if (cmdSize == 3&amp;&amp;buff[0] == '%') */ {
f = toupper(g[1]); /* option = toupper ( buff [ 1 ] ) ; */
} else {
f = 'I'; /* option = 'I' ; */
}
switch (f) /* switch (option) */ {
case 'M': if (getHandle(&amp;d, c)&lt;0) /* if (getHandle(&amp;destInfo, data)&lt;0) */ {
fprintf(stderr, &quot;Invalid command.\n&quot;); /* fprintf ( stderr , &quot;Invalid command.\n&quot; ) ; */
break;
}
sendMessage(a, &amp;d, &amp;h, b); /* sendMessage ( myInfo , &amp; destInfo , &amp; textMsg , socketNum ) ; */
free(h.msg); /* free ( textMsg . msg ) ; */
free(d.name); /* free ( destInfo . name ) ; */
getText(&amp;h, c); /* getText ( &amp; textMsg , data ) ; */
c += d.len + 1; /* data += destInfo . len + 1 ; */
break;
case 'B': getText(&amp;h, c); /* getText ( &amp; textMsg , data ) ; */
sendMsgToAll(a, &amp;h, b); /* sendMsgToAll ( myInfo , &amp; textMsg , socketNum ) ; */
free(h.msg); /* free ( textMsg . msg ) ; */
break;
case 'L': sendListRequest(a, b); /* sendListRequest ( myInfo , socketNum ) ; */
break;
case 'E': sendExitRequest(a, b); /* sendExitRequest ( myInfo , socketNum ) ; */
break;
default: fprintf(stderr, &quot;Invalid command.\n&quot;); /* fprintf ( stderr , &quot;Invalid command.\n&quot; ) ; */
break;
}
fprintf(stderr, &quot;$:&quot;); /* fprintf ( stderr , &quot;$:&quot; ) ; */
}
void getPacketHandle(cclient *a, int b) /* void getPacketHandle ( cclient * dest , int offset ) { */{
memcpy(&amp;a-&gt;len, &amp;global_a[b], 1); /* memcpy ( &amp; dest -&gt; len , &amp; BUFFER [ offset ] , 1 ) ; */
a-&gt;name = malloc(a-&gt;len + 1); /* dest -&gt; name = malloc ( dest -&gt; len + 1 ) ; */
memcpy(a-&gt;name, &amp;global_a[b + 1], a-&gt;len); /* memcpy ( dest -&gt; name , &amp; BUFFER [ offset + 1 ] , dest -&gt; len ) ; */
a-&gt;name[a-&gt;len] = '\0'; /* dest -&gt; name [ dest -&gt; len ] = '\0' ; */
}
void getPacketText(msgData *a, int b, int c) /* void getPacketText ( msgData * msg , int index , int packetLen ) { */{
int d = c - b; /* int length = packetLen - index ; */
a-&gt;msg = malloc(d); /* msg -&gt; msg = malloc ( length ) ; */
strcpy(a-&gt;msg, &amp;global_a[b]); /* strcpy ( msg -&gt; msg , &amp; BUFFER [ index ] ) ; */
}
void parseDetails(int a, int b, int c, cclient *d) /* void parseDetails ( int numBytes , int socket , int destSocket , cclient * myInfo ) { */{
uint8_t e; /* uint8_t flag ; */
cclient f; /* cclient src ; */
int32_t g; /* int32_t numHandles ; */
uint16_t h; /* uint16_t length ; */
cclient i; /* cclient dest ; */
msgData j; /* msgData msg ; */
memcpy(&amp;h, global_a, 2); /* memcpy ( &amp; length , BUFFER , 2 ) ; */
h = ntohs(h); /* length = ntohs ( length ) ; */
memcpy(&amp;e, &amp;global_a[2], 1); /* memcpy ( &amp; flag , &amp; BUFFER [ 2 ] , 1 ) ; */
switch (e) /* switch (flag) */ {
case 2: break;
case 3: fprintf(stderr, &quot;\nHandle already in use: %s\n&quot;, d-&gt;name); /* fprintf ( stderr , &quot;\nHandle already in use: %s\n&quot; , myInfo -&gt; name ) ; */
exit(0); /* exit ( 0 ) ; */
close(b); /* close ( socket ) ; */
break;
case 5: getPacketHandle(&amp;i, 3); /* getPacketHandle ( &amp; dest , 3 ) ; */
fprintf(stderr, &quot;$:&quot;); /* fprintf ( stderr , &quot;$:&quot; ) ; */
fprintf(stderr, &quot;\n%s: %s\n&quot;, f.name, j.msg); /* fprintf ( stderr , &quot;\n%s: %s\n&quot; , src . name , msg . msg ) ; */
free(f.name); /* free ( src . name ) ; */
free(j.msg); /* free ( msg . msg ) ; */
free(i.name); /* free ( dest . name ) ; */
getPacketHandle(&amp;f, 4 + i.len); /* getPacketHandle ( &amp; src , 4 + dest . len ) ; */
getPacketText(&amp;j, 5 + i.len + f.len, h); /* getPacketText ( &amp; msg , 5 + dest . len + src . len , length ) ; */
break;
case 7: getPacketHandle(&amp;i, 3); /* getPacketHandle ( &amp; dest , 3 ) ; */
fprintf(stderr, &quot;$:&quot;); /* fprintf ( stderr , &quot;$:&quot; ) ; */
fprintf(stderr, &quot;\nClient with handle %s does not exist.\n&quot;, i.name); /* fprintf ( stderr , &quot;\nClient with handle %s does not exist.\n&quot; , dest . name ) ; */
free(i.name); /* free ( dest . name ) ; */
break;
case 9: close(b); /* close ( socket ) ; */
exit(0); /* exit ( 0 ) ; */
break;
case 11: memcpy(&amp;g, &amp;global_a[3], 4); /* memcpy ( &amp; numHandles , &amp; BUFFER [ 3 ] , 4 ) ; */
int k = 0; /* int received = 0 ; */
printf(&quot;Number of clients: %d\n&quot;, g); /* printf ( &quot;Number of clients: %d\n&quot; , numHandles ) ; */
g = ntohl(g); /* numHandles = ntohl ( numHandles ) ; */
while (k != g) /* while (received != numHandles) */ {
int l = recv(b, global_a, 1024, 0); /* int nbytes = recv ( socket , BUFFER , 1024 , 0 ) ; */
if (l&lt;0) /* if (nbytes&lt;0) */ {
perror(&quot;read&quot;); /* perror ( &quot;read&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
} else if (l == 0) /* if (nbytes == 0) */ {
fprintf(stderr, &quot;\nServer Terminated.\n&quot;); /* fprintf ( stderr , &quot;\nServer Terminated.\n&quot; ) ; */
exit(0); /* exit ( 0 ) ; */
} else {
k++; /* received ++ ; */
getPacketHandle(&amp;i, 3); /* getPacketHandle ( &amp; dest , 3 ) ; */
printf(&quot;\t%s\n&quot;, i.name); /* printf ( &quot;\t%s\n&quot; , dest . name ) ; */
free(i.name); /* free ( dest . name ) ; */
}
}
break;
case 12: break;
default: fprintf(stderr, &quot;\nBad flag!\n&quot;); /* fprintf ( stderr , &quot;\nBad flag!\n&quot; ) ; */
fprintf(stderr, &quot;$:&quot;); /* fprintf ( stderr , &quot;$:&quot; ) ; */
break;
}
}
void startChat(cclient *a, int b) /* void startChat ( cclient * myInfo , int socketNum ) { */{
fd_set c, d; /* fd_set useFds , saveFds ; */
int e; /* int ndx ; */
<A NAME="4"></A>FD_ZERO(&amp;d); /* FD_ZERO ( &amp; saveFds ) ; */
FD_SET(0, &amp;d); /* FD_SET ( 0 , &amp; saveFds ) ; */
FD_SET(b, &amp;d); /* FD_SET ( socketNum , &amp; saveFds ) ; */
<FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#4',2,'match0-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>while (1) /* while (1) */ {
c = d; /* useFds = saveFds ; */
if (select(1024, &amp;c, ((void *)0 ), ((void *)0 ), ((void *)0 ))&lt;0) /* if (select(1024, &amp;useFds, ((void *)0 ), ((void *)0 ), ((void *)0 ))&lt;0) */ {
perror(&quot;select&quot;); /* perror ( &quot;select&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
}
<A NAME="5"></A>for (e = 0; e&lt;1024; e++) {
if (FD_ISSET(e, &amp;c)) /* if (FD_ISSET(ndx, &amp;useFds)) */ {
if (e == b) /* if (ndx == socketNum) */ {</B></FONT>
<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#5',2,'match0-top.html#5',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>int f = read(e, global_a, 1024); /* int nbytes = read ( ndx , BUFFER , 1024 ) ; */
if (f&lt;0) /* if (nbytes&lt;0) */ {
perror(&quot;read&quot;); /* perror ( &quot;read&quot; ) ; */
exit(-1); /* exit ( - 1 ) ; */
} else if (f == 0) /* if (nbytes == 0) */ {
((void)(((&amp;d )-&gt;__fds_bits )[((e ) / (8 * (int)sizeof(__fd_mask) ) )] &amp;= ~((__fd_mask )('U' &lt;&lt; ((e ) % (8 * (int)sizeof(__fd_mask) ) )) ) ) ); /* ( ( void ) ( ( ( &amp; saveFds ) -&gt; __fds_bits ) [ ( ( ndx ) / ( 8 * ( int ) sizeof ( __fd_mask ) ) ) ] &amp;= ~ ( ( __fd_mask ) ( 1UL &lt;&lt; ( ( ndx ) % ( 8 * ( int ) sizeof ( __fd_mask ) ) ) ) ) ) ) ; */
fprintf(stderr, &quot;\nServer Terminated.\n&quot;); /* fprintf ( stderr , &quot;\nServer Terminated.\n&quot; ) ; */
exit(0); /* exit ( 0 ) ; */
} else {
parseDetails(f, b, e, a); /* parseDetails ( nbytes , socketNum , ndx , myInfo ) ; */
}
} else if (e == 0) /* if (ndx == 0) */ {</B></FONT>
processCommands(a, b); /* processCommands ( myInfo , socketNum ) ; */
}
}
}
}
}
int main(int a, char *b) /* int main ( int argc , char * argv [ ] ) { */{
int c = 0; /* int socketNum = 0 ; */
cclient *d = malloc(sizeof(cclient)); /* cclient * myInfo = malloc ( sizeof ( cclient ) ) ; */
if (a != 4) /* if (argc != 4) */ {
printf(&quot;usage: %s handle server-name server-port\n&quot;, b[0]); /* printf ( &quot;usage: %s handle server-name server-port\n&quot; , argv [ 0 ] ) ; */
exit(1); /* exit ( 1 ) ; */
}
d-&gt;len = strlen(b[1]); /* myInfo -&gt; len = strlen ( argv [ 1 ] ) ; */
d-&gt;name = malloc(d-&gt;len); /* myInfo -&gt; name = malloc ( myInfo -&gt; len ) ; */
memcpy(d-&gt;name, b[1], d-&gt;len); /* memcpy ( myInfo -&gt; name , argv [ 1 ] , myInfo -&gt; len ) ; */
c = tcpClientSetup(b[2], b[3]); /* socketNum = tcpClientSetup ( argv [ 2 ] , argv [ 3 ] ) ; */
sendInitPacket(d, c); /* sendInitPacket ( myInfo , socketNum ) ; */
fprintf(stderr, &quot;$:&quot;); /* fprintf ( stderr , &quot;$:&quot; ) ; */
startChat(d, c); /* startChat ( myInfo , socketNum ) ; */
close(c); /* close ( socketNum ) ; */
free(d); /* free ( myInfo ) ; */
return 0; /* return 0 */
}
</PRE>
</BODY>
</HTML>
