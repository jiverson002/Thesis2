<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>handle.c</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>handle.c</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>

<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#0',2,'match0-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>unsigned int __bswap_32(unsigned int a) /* while ( cur ) { if ( cur -&gt; sock == */{
return __builtin_bswap32(a); /* return __builtin_bswap32(__bsx) */
}
__uint64_t __bswap_64(__uint64_t a) /* cur -&gt; next ; deleteHandle ( cur ) ; */{
return __builtin_bswap64(a); /* return __builtin_bswap64(__bsx) */
}
void deleteHandle(c_handle *a) /* static void deleteHandle ( c_handle * han ) { */{</B></FONT>
free(a); /* free ( han ) ; */
}
void destroy_list(c_handle **a) /* void destroy_list ( c_handle * * head ) { */{
c_handle *b = *a; /* c_handle * pos = * head ; */
c_handle *c = pos; /* c_handle * last = pos ; */
if (b) /* if (pos) */ {
while (b-&gt;next) /* while (pos-&gt;next) */ {
b = b-&gt;next; /* pos = pos -&gt; next ; */
deleteHandle(c); /* deleteHandle ( last ) ; */
}
deleteHandle(b); /* deleteHandle ( pos ) ; */
}
*a = ((void *)0 ); /* * head = ( ( void * ) 0 ) ; */
}
int getHandleByIndex(c_handle *a, uint16_t b) /* int getHandleByIndex ( c_handle * head , uint16_t index ) { */{
uint16_t c; /* uint16_t i ; */
c_handle *d = head; /* c_handle * pos = head ; */
for (c = 0; c&lt;b; c++) {

}
return d-&gt;sock; /* return pos-&gt;sock */
}
char * getHandleName(c_handle *a, int b) /* char * getHandleName ( c_handle * head , int sock ) { */{
while (a) /* while (head) */ {
if (a-&gt;sock == b) /* if (head-&gt;sock == sock) */ {
return a-&gt;name; /* return head-&gt;name */
}
a = a-&gt;next; /* head = head -&gt; next ; */
}
return ((void *)0 ); /* return ((void *)0 ) */
}
int getHandleSocket(c_handle *a, char *b) /* int getHandleSocket ( c_handle * head , char * name ) { */{
while (a) /* while (head) */ {
if (!strcmp(a-&gt;name, b)) /* if (!strcmp(head-&gt;name, name)) */ {
return a-&gt;sock; /* return head-&gt;sock */
}
a = a-&gt;next; /* head = head -&gt; next ; */
}
return -1; /* return -1 */
}
int removeHandle(c_handle **a, int b) /* int removeHandle ( c_handle * * head , int sock ) { */{
c_handle *c = *a; /* c_handle * cur = * head ; */
c_handle *d = *a; /* c_handle * last = * head ; */
if (c) /* if (cur) */ {
if (c-&gt;sock == b) /* if (cur-&gt;sock == sock) */ {
*a = c-&gt;next; /* * head = cur -&gt; next ; */
deleteHandle(c); /* deleteHandle ( cur ) ; */
return 0; /* return 0 */
}
c = *a; /* cur = * head ; */
}
if (b&lt;3) /* if (sock&lt;3) */ {
return -1; /* return -1 */
}
while (c) /* while (cur) */ {
if (c-&gt;sock == b) /* if (cur-&gt;sock == sock) */ {
d-&gt;next = c-&gt;next; /* last -&gt; next = cur -&gt; next ; */
deleteHandle(c); /* deleteHandle ( cur ) ; */
return 0; /* return 0 */
}
c = c-&gt;next; /* cur = cur -&gt; next ; */
}
return -1; /* return -1 */
}
int addHandle(c_handle **a, int b, char *c) /* int addHandle ( c_handle * * head , int sock , char * name ) { */{
c_handle *d = *a; /* c_handle * pos = * head ; */
if (b&lt;3 || -1 != getHandleSocket(*a, c)) /* if (sock&lt;3 || -1 != getHandleSocket(*head, name)) */ {
return -1; /* return -1 */
}
if (!*a) /* if (!*head) */ {
*a = calloc(1, sizeof(c_handle)); /* * head = calloc ( 1 , sizeof ( c_handle ) ) ; */
(*a )-&gt;sock = b; /* ( * head ) -&gt; sock = sock ; */
strcpy((*a )-&gt;name, c); /* strcpy ( ( * head ) -&gt; name , name ) ; */
} else {
while (d-&gt;next) /* while (pos-&gt;next) */ {

}
d-&gt;next = calloc(1, sizeof(c_handle)); /* pos -&gt; next = calloc ( 1 , sizeof ( c_handle ) ) ; */
d = d-&gt;next; /* pos = pos -&gt; next ; */
d-&gt;sock = b; /* pos -&gt; sock = sock ; */
strcpy(d-&gt;name, c); /* strcpy ( pos -&gt; name , name ) ; */
}
return 0; /* return 0 */
}
</PRE>
</BODY>
</HTML>
